#!/bin/bash\n\n# INSTALACI\u00d3N DE CONFIGURACI\u00d3N WHATSAPP PARA INTERTRAVEL\n# ========================================================\n\necho \"🚀 Iniciando instalaci\u00f3n de configuraci\u00f3n WhatsApp...\"\n\n# Verificar que estamos en el directorio correcto\nif [ ! -d \"frontend\" ]; then\n    echo \"❌ Error: No se encuentra el directorio frontend. Aseg\u00farate de ejecutar desde la ra\u00edz del proyecto.\"\n    exit 1\nfi\n\necho \"✅ Directorio frontend encontrado\"\n\n# Verificar que existe el archivo de configuraci\u00f3n\nif [ ! -f \"frontend/public/js/whatsapp-config.js\" ]; then\n    echo \"❌ Error: No se encuentra el archivo whatsapp-config.js\"\n    exit 1\nfi\n\necho \"✅ Archivo de configuraci\u00f3n encontrado\"\n\n# Actualizar layout.tsx del admin para incluir WhatsApp Config\necho \"📝 Actualizando navegaci\u00f3n del admin...\"\n\n# Verificar que el admin de WhatsApp est\u00e1 configurado\nif [ -f \"frontend/src/app/admin/whatsapp/page.tsx\" ]; then\n    echo \"✅ P\u00e1gina de configuraci\u00f3n WhatsApp ya existe\"\nelse\n    echo \"❌ Error: La p\u00e1gina de configuraci\u00f3n WhatsApp no existe\"\n    exit 1\nfi\n\n# Crear archivo de documentaci\u00f3n\ncat > WHATSAPP_CONFIG_README.md << 'EOF'\n# Configuraci\u00f3n de WhatsApp para InterTravel\n\n## \u00bfQu\u00e9 se ha instalado?\n\n### 1. Panel de Administraci\u00f3n\n- Nueva p\u00e1gina: `/admin/whatsapp`\n- Configuraci\u00f3n de n\u00fameros y mensajes por landing\n- Vista previa en tiempo real\n- Generaci\u00f3n autom\u00e1tica de configuraci\u00f3n JavaScript\n\n### 2. Archivo de Configuraci\u00f3n Global\n- Ubicaci\u00f3n: `frontend/public/js/whatsapp-config.js`\n- Contiene configuraci\u00f3n para todas las landing pages\n- Funciones globales para WhatsApp\n- Compatibilidad con c\u00f3digo existente\n\n### 3. Contextos Disponibles\n- `main`: Landing principal\n- `results`: P\u00e1gina de resultados de b\u00fasqueda\n- `detail`: Detalle de paquete\n- `agency`: Portal de agencias\n- `prebooking`: Formulario de prebooking\n\n## C\u00f3mo usar\n\n### En cualquier p\u00e1gina HTML\n```html\n<!-- Incluir el archivo de configuraci\u00f3n -->\n<script src=\"/js/whatsapp-config.js\"></script>\n\n<!-- Usar en un bot\u00f3n -->\n<button onclick=\"openWhatsAppWithConfig('main')\">Contactar por WhatsApp</button>\n\n<!-- Para paquetes espec\u00edficos -->\n<button onclick=\"openWhatsAppWithConfig('detail', 'Cancun Paradise')\">Consultar Paquete</button>\n```\n\n### En React/Next.js\n```jsx\n// En el useEffect o al cargar la p\u00e1gina\nuseEffect(() => {\n  // Cargar configuraci\u00f3n\n  const script = document.createElement('script');\n  script.src = '/js/whatsapp-config.js';\n  document.head.appendChild(script);\n}, []);\n\n// En un componente\nconst handleWhatsAppClick = () => {\n  if (window.openWhatsAppWithConfig) {\n    window.openWhatsAppWithConfig('main');\n  }\n};\n```\n\n### Funciones Disponibles\n\n#### B\u00e1sicas\n- `openWhatsAppWithConfig(context, packageName)`: Abre WhatsApp con configuraci\u00f3n espec\u00edfica\n- `openWhatsAppContextual(context, packageName)`: Considera horario de atenci\u00f3n\n- `openWhatsAppWithTracking(context, packageName)`: Incluye tracking de analytics\n\n#### Utilidades\n- `isBusinessHours()`: Verifica si es horario de atenci\u00f3n\n- `getContextualMessage(context, packageName)`: Obtiene mensaje apropiado\n\n#### Compatibilidad\n- `openWhatsApp()`: Mantiene compatibilidad con c\u00f3digo existente\n- `contactWhatsApp()`: Alias para compatibilidad\n- `contactWhatsAppDirect()`: Alias para compatibilidad\n\n## Configuraci\u00f3n desde el Admin\n\n1. Ir a `/admin/whatsapp`\n2. Configurar n\u00fameros y mensajes para cada landing\n3. Configurar mensajes globales\n4. Guardar configuraci\u00f3n\n5. La configuraci\u00f3n se aplica autom\u00e1ticamente\n\n## Caracter\u00edsticas Avanzadas\n\n### Tracking de Analytics\n- Google Analytics: Evento `whatsapp_click`\n- Facebook Pixel: Evento `Contact`\n- Datos: contexto y nombre del paquete\n\n### Horarios de Atenci\u00f3n\n- Detecta autom\u00e1ticamente horario comercial\n- Cambia mensaje fuera de horario\n- Configurable desde admin\n\n### Variables en Mensajes\n- `[PACKAGE_NAME]`: Se reemplaza con el nombre del paquete\n- Agregar m\u00e1s variables seg\u00fan necesidad\n\n## Troubleshooting\n\n### Si no funciona\n1. Verificar que el archivo `whatsapp-config.js` est\u00e9 cargado\n2. Abrir console del navegador y buscar logs de WhatsApp\n3. Verificar que las funciones est\u00e9n disponibles: `typeof window.openWhatsAppWithConfig`\n\n### Errores comunes\n- \"Configuraci\u00f3n no encontrada\": El archivo no se carg\u00f3 correctamente\n- N\u00famero inv\u00e1lido: Verificar formato en admin (+54 9 261 XXX-XXXX)\n- Mensaje vac\u00edo: Configurar mensajes en admin\n\n## Mantenimiento\n\n- La configuraci\u00f3n se actualiza desde `/admin/whatsapp`\n- No modificar manualmente `whatsapp-config.js`\n- Hacer backup antes de cambios importantes\n- Probar en diferentes dispositivos\n\nEOF\n\necho \"📚 Documentaci\u00f3n creada: WHATSAPP_CONFIG_README.md\"\n\n# Verificar que el servidor backend est\u00e1 corriendo\necho \"🔍 Verificando servidor backend...\"\nif curl -s http://localhost:3002/api/health > /dev/null; then\n    echo \"✅ Servidor backend funcionando\"\nelse\n    echo \"⚠️ Servidor backend no responde. Iniciar con: npm run dev en backend/\"\nfi\n\n# Verificar que el frontend est\u00e1 corriendo\necho \"🔍 Verificando servidor frontend...\"\nif curl -s http://localhost:3005 > /dev/null; then\n    echo \"✅ Servidor frontend funcionando\"\nelse\n    echo \"⚠️ Servidor frontend no responde. Iniciar con: npm run dev en frontend/\"\nfi\n\necho \"\"\necho \"🎉 ¡Instalaci\u00f3n completada exitosamente!\"\necho \"\"\necho \"📋 Pr\u00f3ximos pasos:\"\necho \"1. Abrir http://localhost:3005/admin/whatsapp\"\necho \"2. Configurar n\u00fameros de WhatsApp\"\necho \"3. Personalizar mensajes por landing\"\necho \"4. Probar configuraci\u00f3n\"\necho \"5. Aplicar a todas las p\u00e1ginas\"\necho \"\"\necho \"📖 Leer documentaci\u00f3n completa: WHATSAPP_CONFIG_README.md\"\necho \"🐞 En caso de problemas: revisar logs del navegador\"\necho \"\"\necho \"✨ ¡InterTravel WhatsApp Configuration est\u00e1 listo!\"\n